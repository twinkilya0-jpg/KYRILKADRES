-- UniversalScript (By:Carryxkn2) - CLEAN VERSION
if not game:IsLoaded() then game.Loaded:Wait() end

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local RS = game:GetService("RunService")
local TS = game:GetService("TeleportService")

-- Переменные состояния
local autofarm_coins = false
local walkspeed_val = "16"
local jump_val = "50"

-- [!] ЗАГРУЗКА БИБЛИОТЕКИ FLUENT
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

local Window = Fluent:CreateWindow({
    Title = "Script for Dress To impress",
    SubTitle = "By:Carryxkn2",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = false,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl -- Меню открывается/закрывается на Левый Control
})

-- [!] ВКЛАДКИ МЕНЮ
local Tabs = {
    Farm = Window:AddTab({ Title = "Автофарм", Icon = "shovels" }),
    Main = Window:AddTab({ Title = "Игрок", Icon = "user" }),
    Settings = Window:AddTab({ Title = "Другое", Icon = "settings" })
}

--- [!] ВКЛАДКА: АВТОФАРМ
Tabs.Farm:AddToggle("AutofarmTog", {
    Title = "Включить бесконечный сбор монет", 
    Default = false,
    Callback = function(v)
        autofarm_coins = v
    end
})

Tabs.Farm:AddButton({
    Title = "Собрать все монеты (Разово)",
    Callback = function()
        for _, obj in pairs(workspace:GetDescendants()) do
            if (obj.Name:find("Coin") or obj.Name:find("Token") or obj.Name:find("Money")) and obj:IsA("BasePart") then
                if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    LocalPlayer.Character.HumanoidRootPart.CFrame = obj.CFrame
                    task.wait(0.15)
                end
            end
        end
    end
})

--- [!] ВКЛАДКА: ИГРОК
Tabs.Main:AddInput("WSInput", {Title = "Скорость", Default = "16", Callback = function(v) walkspeed_val = v end})
Tabs.Main:AddButton({Title = "Применить скорость", Callback = function() 
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then 
        LocalPlayer.Character.Humanoid.WalkSpeed = tonumber(walkspeed_val) or 16
    end 
end})

Tabs.Main:AddInput("JPInput", {Title = "Прыжок", Default = "50", Callback = function(v) jump_val = v end})
Tabs.Main:AddButton({Title = "Применить прыжок", Callback = function() 
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then 
        LocalPlayer.Character.Humanoid.JumpPower = tonumber(jump_val) or 50
    end 
end})

--- [!] ЛОГИКА АВТОФАРМА
task.spawn(function()
    while true do
        task.wait(0.3)
        if autofarm_coins then
            pcall(function()
                local found = false
                for _, obj in pairs(workspace:GetDescendants()) do
                    if not autofarm_coins then break end
                    if (obj.Name == "Coin" or obj.Name == "Token" or obj.Name == "Money" or obj.Parent.Name == "Coins") and obj:IsA("BasePart") and obj.Transparency < 1 then
                        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                            LocalPlayer.Character.HumanoidRootPart.CFrame = obj.CFrame
                            found = true
                            task.wait(0.25)
                        end
                    end
                end
                if not found then task.wait(1.5) end
            end)
        end
    end
end)

Window:SelectTab(1)
